<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enqvy Discord Presence</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Arial', sans-serif;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, var(--accent-1,#ff006e), var(--accent-2,#00f5ff), var(--accent-3,#ffd60a));
      transition: background 0.5s ease;
      overflow: hidden;
    }

    /* Animated glowing balls */
    .glow-orb {
      position: absolute;
      width: 350px;
      height: 350px;
      border-radius: 50%;
      filter: blur(85px);
      opacity: 0.45;
      pointer-events: none;
      animation: floatGlow 14s infinite ease-in-out;
    }

    @keyframes floatGlow {
      0%   { transform: translate(-60px, -40px) scale(1); }
      50%  { transform: translate(60px, 50px) scale(1.3); }
      100% { transform: translate(-60px, -40px) scale(1); }
    }

    /* GLASS WINDOW */
    #windowWrapper {
      padding: 35px 45px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.12);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      border: 1px solid rgba(255, 255, 255, 0.25);
      box-shadow: 0 10px 40px rgba(0,0,0,0.35);
      z-index: 3;
      display: flex;
      flex-direction: column;
      align-items: center;

      opacity: 0;
      animation: fadeIn 1.1s ease forwards, glassPulse 8s infinite ease-in-out;
      transition: box-shadow 0.3s ease, border 0.3s ease;
    }

    /* RGB OUTLINE ON HOVER â€” GLOW EFFECT */
    #windowWrapper:hover {
      border: 2px solid transparent;
      animation: rgbBorder 3s infinite linear;
    }

    @keyframes rgbBorder {
      0%   { box-shadow: 0 0 20px #ff0000, 0 0 40px #ff0000; }
      25%  { box-shadow: 0 0 20px #00ffea, 0 0 40px #00ffea; }
      50%  { box-shadow: 0 0 20px #2bff00, 0 0 40px #2bff00; }
      75%  { box-shadow: 0 0 20px #c400ff, 0 0 40px #c400ff; }
      100% { box-shadow: 0 0 20px #ff0000, 0 0 40px #ff0000; }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.94); }
      to { opacity: 1; transform: scale(1); }
    }

    @keyframes glassPulse {
      0% { background: rgba(255, 255, 255, 0.12); }
      50% { background: rgba(255, 255, 255, 0.18); }
      100% { background: rgba(255, 255, 255, 0.12); }
    }

    /* Profile */
    #profile { color: #fff; text-align: center; }

    #avatar {
      width: 128px;
      height: 128px;
      border-radius: 50%;
      border: 3px solid #fff;
      margin-bottom: 10px;
      box-shadow: 0 0 15px rgba(255,255,255,0.4);
    }

    #statusIndicator {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      display: inline-block;
      margin-left: 8px;
      border: 2px solid #fff;
      box-shadow: 0 0 10px rgba(255,255,255,0.6);
    }

    #customStatus {
      margin-top: 5px;
      font-style: italic;
      opacity: 0.85;
    }

    /* ABOUT ME SECTION */
    #aboutMeBox {
      margin-top: 25px;
      width: 100%;
      padding: 15px;
      background: rgba(255, 255, 255, 0.10);
      border-radius: 14px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: #fff;
      text-align: center;
      font-size: 0.95em;
      line-height: 1.5em;
      box-shadow: 0 0 12px rgba(255,255,255,0.1);
    }

    #aboutTitle {
      font-weight: bold;
      font-size: 1.1em;
      margin-bottom: 8px;
      color: #ffffff;
    }

    /* Background image wrapper */
    .bg-image {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      z-index: -1;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .bg-image.loaded { opacity: 1; }

  </style>
</head>
<body>

  <!-- RGB glow orbs -->
  <div class="glow-orb" id="glow1"></div>
  <div class="glow-orb" id="glow2" style="animation-delay:-4s;"></div>
  <div class="glow-orb" id="glow3" style="animation-delay:-7s;"></div>

  <!-- Glass Window -->
  <div id="windowWrapper">
    <div id="profile">
      <img id="avatar" src="" alt="Avatar">
      <h2 id="username">Loading...</h2>
      <span id="statusIndicator"></span>
      <div id="customStatus"></div>
    </div>

    <!-- ABOUT ME AREA -->
    <div id="aboutMeBox">
      <div id="aboutTitle">About Me</div>
      <div id="aboutDescription">
        <!-- Put your custom description here -->
        Goofy Lil Tea Drinker
        Exec at .gg/dwc25
        Owner at yllabs.xyz
      </div>
    </div>
  </div>

  <script>
    const CONFIG = {
      discordUserId: "1437013692440121414",
      backgroundImage: "https://cdn.discordapp.com/attachments/1435190777868324949/1436077761365278772/background_1079_687080c6b2e8b6.03818783.png?ex=691c22e3&is=691ad163&hm=35b7c1c381b9b21770d5976cbe3d222e38941170da10307b333eee7c9c93a408"
    };

    /* BACKGROUND IMAGE SETUP */
    const bgDiv = document.createElement("div");
    bgDiv.className = "bg-image";
    bgDiv.style.backgroundImage = `url('${CONFIG.backgroundImage}')`;
    document.body.appendChild(bgDiv);

    const bgImg = new Image();
    bgImg.onload = () => bgDiv.classList.add("loaded");
    bgImg.src = CONFIG.backgroundImage;

    /* Extract theme colors from image */
    function extractColors(imageUrl) {
      return new Promise((resolve, reject) => {
        const img = new Image();
        img.crossOrigin = "Anonymous";
        img.src = imageUrl;

        img.onload = () => {
          const canvas = document.createElement("canvas");
          const ctx = canvas.getContext("2d");
          canvas.width = 50; canvas.height = 50;
          ctx.drawImage(img, 0, 0, 50, 50);

          const data = ctx.getImageData(0, 0, 50, 50).data;
          let r=0,g=0,b=0,count=0;

          for(let i=0;i<data.length;i+=4){
            r+=data[i];
            g+=data[i+1];
            b+=data[i+2];
            count++;
          }

          resolve({
            color1:`rgb(${r/count},${g/count},${b/count})`,
            color2:`rgb(${b/count},${r/count},${g/count})`,
            color3:`rgb(${g/count},${b/count},${r/count})`
          });
        };

        img.onerror = reject;
      });
    }

    async function updateTheme(imageUrl) {
      try {
        const colors = await extractColors(imageUrl);
        document.getElementById("glow1").style.background = colors.color1;
        document.getElementById("glow2").style.background = colors.color2;
        document.getElementById("glow3").style.background = colors.color3;

        document.documentElement.style.setProperty("--accent-1", colors.color1);
        document.documentElement.style.setProperty("--accent-2", colors.color2);
        document.documentElement.style.setProperty("--accent-3", colors.color3);
      } catch(e) {}
    }

    updateTheme(CONFIG.backgroundImage);

    /* Discord Presence via Lanyard */
    function connectLanyard(){
      const ws = new WebSocket("wss://api.lanyard.rest/socket");
      let heartbeat;

      ws.onmessage = async e => {
        const payload = JSON.parse(e.data);

        switch (payload.op) {
          case 1:
            heartbeat = setInterval(() => ws.send(JSON.stringify({ op: 3 })), payload.d.heartbeat_interval);
            ws.send(JSON.stringify({ op: 2, d: { subscribe_to_id: CONFIG.discordUserId }}));
            break;

          case 0:
            if (payload.t === "INIT_STATE" || payload.t === "PRESENCE_UPDATE") {
              const d = payload.d;
              const u = d.discord_user;
              const s = d.discord_status;

              document.getElementById("username").textContent = u.username;
              document.getElementById("avatar").src =
                `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.png?size=256`;

              const colors = {
                online:"#43b581",
                idle:"#faa61a",
                dnd:"#f04747",
                offline:"#747f8d"
              };

              document.getElementById("statusIndicator").style.background =
                colors[s] || colors.offline;

              const custom = d.activities.find(a => a.type === 4);
              document.getElementById("customStatus").textContent = custom?.state || "";

              await updateTheme(
                `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.png?size=256`
              );
            }
            break;
        }
      };

      ws.onclose = () => {
        clearInterval(heartbeat);
        setTimeout(connectLanyard, 5000);
      };
    }

    connectLanyard();
  </script>
</body>
</html>
