<!doctype html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>E</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body::-webkit-scrollbar{display:none}
body{font-family:Inter,sans-serif;min-height:100vh;overflow-x:hidden;overflow-y:auto;position:relative;background:#000;display:flex;align-items:center;justify-content:center;-ms-overflow-style:none;scrollbar-width:none}
.gradient-bg{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#667eea 0,#764ba2 25%,#f093fb 50%,#4facfe 75%,#00f2fe 100%);background-size:400% 400%;animation:gradientShift 15s ease infinite;z-index:1}
.gradient-bg.hidden{display:none}
@keyframes gradientShift{0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}
.bg-image{position:fixed;top:0;left:0;width:100%;height:100%;background-size:cover;background-position:center;background-repeat:no-repeat;z-index:1;opacity:0;transition:opacity .8s ease}
.bg-image.loaded{opacity:1}
.bg-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);z-index:2;pointer-events:none}
.orbs-container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:3;pointer-events:none;overflow:hidden;opacity:0;visibility:hidden;transition:opacity 1.5s ease,visibility 1.5s ease}
.orbs-container.visible{opacity:1;visibility:visible}
.orb{position:absolute;border-radius:50%;filter:blur(80px);opacity:0;animation:orbFadeIn 2s ease forwards}
@keyframes orbFadeIn{to{opacity:.6}}
.orb-1{width:500px;height:500px;background:var(--accent-1,transparent);top:-100px;left:-100px;animation:float1 20s ease-in-out infinite,orbFadeIn 2s ease forwards;animation-delay:0s,.2s}
.orb-2{width:400px;height:400px;background:var(--accent-2,transparent);bottom:-100px;right:-100px;animation:float2 25s ease-in-out infinite,orbFadeIn 2s ease forwards;animation-delay:0s,.4s}
.orb-3{width:350px;height:350px;background:var(--accent-3,transparent);top:50%;left:50%;transform:translate(-50%,-50%);animation:float3 30s ease-in-out infinite,orbFadeIn 2s ease forwards;animation-delay:0s,.6s}
@keyframes float1{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(30px,-30px) scale(1.05)}66%{transform:translate(-20px,20px) scale(.95)}}
@keyframes float2{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(-30px,-20px) scale(.95)}66%{transform:translate(20px,30px) scale(1.05)}}
@keyframes float3{0%,100%{transform:translate(-50%,-50%) scale(1)}33%{transform:translate(-45%,-55%) scale(1.05)}66%{transform:translate(-55%,-45%) scale(.95)}}
.container{max-width:500px;width:100%;padding:3rem 1.5rem;position:relative;z-index:10}
.profile{text-align:center;margin-bottom:2rem;animation:fadeInDown .8s ease}
@keyframes fadeInDown{from{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}
.avatar-wrapper{position:relative;display:inline-block;margin-bottom:1.5rem;transition:transform .4s ease;transform:perspective(200px) translateZ(0);will-change:transform}
.avatar-wrapper:hover{transform:perspective(200px) translateZ(20px) scale(1.05)}
.avatar{width:120px;height:120px;border-radius:50%;border:4px solid rgba(255,255,255,.3);box-shadow:0 20px 60px rgba(0,0,0,.3),0 0 0 10px rgba(255,255,255,.1),inset 0 0 20px rgba(255,255,255,.1);transition:box-shadow .4s ease;position:relative;z-index:1}
.avatar-wrapper:hover .avatar{box-shadow:0 25px 80px rgba(0,0,0,.4),0 0 0 10px rgba(255,255,255,.2),inset 0 0 30px rgba(255,255,255,.2)}
.status-indicator{position:absolute;bottom:8px;right:8px;width:24px;height:24px;border-radius:50%;border:4px solid rgba(255,255,255,.9);background:#43b581;box-shadow:0 0 20px rgba(67,181,129,.8);z-index:2;transition:background .3s ease}
.username{font-size:2.5rem;font-weight:800;color:#fff;text-shadow:0 4px 20px rgba(0,0,0,.3);margin-bottom:.5rem}
.custom-status{font-size:1rem;color:rgba(255,255,255,.9);font-weight:500}
.glass-card{background:rgba(255,255,255,.15);backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px);border:1px solid rgba(255,255,255,.25);border-radius:20px;padding:1.5rem;margin-bottom:1rem;box-shadow:0 8px 32px rgba(0,0,0,.1),inset 0 1px 0 rgba(255,255,255,.3);position:relative;overflow:hidden;animation:fadeInUp .8s ease backwards;transition:transform .4s cubic-bezier(.175, .885, .32, 1.275),background .4s ease,border-color .4s ease,box-shadow .4s ease;transform:perspective(500px) translateZ(0);will-change:transform}
.glass-card::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease;z-index:1;pointer-events:none}
.glass-card>*{position:relative;z-index:2}
.glass-card:hover::before{left:100%}
.glass-card:hover{transform:perspective(500px) translateZ(15px);background:rgba(255,255,255,.2);border-color:rgba(255,255,255,.4);box-shadow:0 15px 50px rgba(0,0,0,.2),inset 0 1px 0 rgba(255,255,255,.4)}
.glass-card:active{transform:perspective(500px) translateZ(8px)}
@keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
.spotify-card{display:flex;align-items:center;gap:1.5rem;padding:1.5rem;background:rgba(30,215,96,.2);border:1px solid rgba(30,215,96,.4)}
.spotify-card.hidden{display:none}
.spotify-album{width:80px;height:80px;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.3);flex-shrink:0}
.spotify-info{flex:1;min-width:0}
.spotify-label{font-size:.7rem;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.8);margin-bottom:.5rem;font-weight:600}
.spotify-title{font-size:1.1rem;font-weight:700;color:#fff;margin-bottom:.3rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.spotify-artist{font-size:.9rem;color:rgba(255,255,255,.9);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.socials{display:flex;justify-content:center;gap:1rem;flex-wrap:wrap}
.social-link{width:60px;height:60px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,.15);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.25);border-radius:15px;color:#fff;font-size:1.5rem;text-decoration:none;box-shadow:0 4px 15px rgba(0,0,0,.1);transition:transform .3s ease,background .3s ease,box-shadow .3s ease,border-color .3s ease;transform:perspective(300px) translateZ(0);will-change:transform}
.social-link i{transition:transform .3s ease;display:flex;align-items:center;justify-content:center}
.social-link:hover{transform:perspective(300px) translateZ(20px);background:rgba(255,255,255,.25);box-shadow:0 8px 25px rgba(0,0,0,.2);border-color:rgba(255,255,255,.35)}
.social-link:hover i{transform:scale(1.1)}
.social-link:active{transform:perspective(300px) translateZ(10px)}
.link-btn{display:flex;align-items:center;gap:1rem;text-decoration:none;color:#fff;font-weight:600;font-size:1.05rem;padding:1.5rem;transition:padding-left .3s ease}
.glass-card:hover .link-btn{padding-left:2rem}
.link-btn i{font-size:1.5rem;width:30px;text-align:center;flex-shrink:0;transition:transform .3s ease}
.glass-card:hover .link-btn i{transform:scale(1.1)}
.glass-card:first-child{animation-delay:.1s}
.glass-card:nth-child(2){animation-delay:.2s}
.glass-card:nth-child(3){animation-delay:.3s}
.glass-card:nth-child(4){animation-delay:.4s}
.glass-card:nth-child(5){animation-delay:.5s}
.glass-card:nth-child(6){animation-delay:.6s}
.glass-card:nth-child(7){animation-delay:.7s}
.glass-card:nth-child(8){animation-delay:.8s}
@media (max-width:600px){.container{padding:2rem 1rem}.username{font-size:2rem}.avatar{width:100px;height:100px}}
</style>
<div class="gradient-bg" id="gradientBg"></div>
<div class="bg-overlay"></div>
<div class="orbs-container" id="orbsContainer">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
</div>
<audio id="bgMusic" loop preload="auto">
    <source src="https://files.catbox.moe/wkeg5z.mp3" type="audio/mpeg">
</audio>
<div class="container">
    <div class="profile">
        <div class="avatar-wrapper">
            <img id="avatar" class="avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" alt="Avatar">
            <div class="status-indicator" id="statusIndicator"></div>
        </div>
        <h1 class="username" id="username">Loading...</h1>
        <p class="custom-status" id="customStatus">Discord User</p>
    </div>
    <div class="glass-card spotify-card hidden" id="spotifyCard">
        <img id="spotifyAlbum" class="spotify-album" src="" alt="Album" loading="lazy">
        <div class="spotify-info">
            <div class="spotify-label">♫ Now Playing</div>
            <div class="spotify-title" id="spotifyTitle"></div>
            <div class="spotify-artist" id="spotifyArtist"></div>
        </div>
    </div>
    <div class="glass-card">
        <div class="socials" id="socials"></div>
    </div>
    <div id="links"></div>
</div>
<script>
  const CONFIG = {
    discordUserId: "1437013692440121414",
    backgroundImage: "https://files.catbox.moe/265m5g.avif",
    socials: {
      github: { url: "https://github.com/Enqvy", icon: "fab fa-github" },
      spotify: { url: "https://open.spotify.com/user/315elchwqzfzyfhvanpygkvrfqcq", icon: "fab fa-spotify" },
      steam: { url: "https://steamcommunity.com/id/enqvy/", icon: "fab fa-steam" },
      youtube: { url: "https://youtube.com/@enqvy", icon: "fab fa-youtube" },
      discord: { url: `https://discord.com/users/${CONFIG.discordUserId}`, icon: "fab fa-discord" }
    }
  };

  // Helpers to extract average colors from an image for theming
  function extractColors(imageUrl) {
    return new Promise((resolve, reject) => {
      const img = new Image();
      img.crossOrigin = "Anonymous";
      img.src = imageUrl;
      img.onload = () => {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = 50;
        canvas.height = 50;
        ctx.drawImage(img, 0, 0, 50, 50);
        const data = ctx.getImageData(0, 0, 50, 50).data;
        let r = 0, g = 0, b = 0, count = 0;
        for (let i = 0; i < data.length; i += 4) {
          r += data[i];
          g += data[i + 1];
          b += data[i + 2];
          count++;
        }
        r = Math.floor(r / count);
        g = Math.floor(g / count);
        b = Math.floor(b / count);
        resolve({
          color1: `rgb(${r}, ${g}, ${b})`,
          color2: `rgb(${b}, ${r}, ${g})`,
          color3: `rgb(${g}, ${b}, ${r})`,
        });
      };
      img.onerror = () => {
        reject(new Error("Failed to load image for color extraction"));
      };
    });
  }

  let bgImageLoaded = false;
  let colorsExtracted = false;

  function showOrbs() {
    if (bgImageLoaded && colorsExtracted) {
      document.getElementById("orbsContainer").classList.add("visible");
    }
  }

  async function updateTheme(imageUrl) {
    try {
      const cols = await extractColors(imageUrl);
      document.documentElement.style.setProperty("--accent-1", cols.color1);
      document.documentElement.style.setProperty("--accent-2", cols.color2);
      document.documentElement.style.setProperty("--accent-3", cols.color3);
      colorsExtracted = true;
      showOrbs();
    } catch (e) {
      console.error("Color extraction error", e);
      // fallback colours
      document.documentElement.style.setProperty("--accent-1", "#ff006e");
      document.documentElement.style.setProperty("--accent-2", "#00f5ff");
      document.documentElement.style.setProperty("--accent-3", "#ffd60a");
      colorsExtracted = true;
      showOrbs();
    }
  }

  // Background image logic
  if (CONFIG.backgroundImage) {
    document.getElementById("gradientBg").classList.add("hidden");
    const bgDiv = document.createElement("div");
    bgDiv.className = "bg-image";
    bgDiv.style.backgroundImage = `url('${CONFIG.backgroundImage}')`;
    document.body.insertBefore(bgDiv, document.body.firstChild);

    const tImg = new Image();
    tImg.onload = () => {
      bgImageLoaded = true;
      bgDiv.classList.add("loaded");
      updateTheme(CONFIG.backgroundImage);
    };
    tImg.onerror = () => {
      console.error("Background load failed");
      bgImageLoaded = true;
      bgDiv.classList.add("loaded");
      updateTheme(CONFIG.backgroundImage);
    };
    tImg.src = CONFIG.backgroundImage;
  } else {
    bgImageLoaded = true;
    colorsExtracted = true;
    showOrbs();
  }

  // Social links render
  const socialsContainer = document.getElementById("socials");
  Object.entries(CONFIG.socials).forEach(([key, obj]) => {
    if (obj.url) {
      const a = document.createElement("a");
      a.href = obj.url;
      a.target = "_blank";
      a.className = "social-link";
      a.innerHTML = `<i class="${obj.icon}"></i>`;
      socialsContainer.appendChild(a);
    }
  });

  // Lanyard WebSocket: live Discord presence
  function connectLanyard() {
    const ws = new WebSocket("wss://api.lanyard.rest/socket");
    let heartbeatInterval;

    ws.onopen = () => {
      console.log("Lanyard websocket connected");
    };

    ws.onmessage = async (msg) => {
      const payload = JSON.parse(msg.data);
      switch (payload.op) {
        case 1: {
          // Hello → get heartbeat interval
          const hb = payload.d.heartbeat_interval;
          heartbeatInterval = setInterval(() => {
            ws.send(JSON.stringify({ op: 3 }));
          }, hb);
          // Subscribe to your user ID
          ws.send(JSON.stringify({ op: 2, d: { subscribe_to_id: CONFIG.discordUserId } }));
          break;
        }
        case 0: {
          // Event: either INIT_STATE or PRESENCE_UPDATE
          if (payload.t === "INIT_STATE" || payload.t === "PRESENCE_UPDATE") {
            const data = payload.d;
            const u = data.discord_user;
            const status = data.discord_status;
            const activities = data.activities;
            const spotify = data.spotify;

            // Update username
            document.getElementById("username").textContent = u.username;

            // Update avatar
            const avatarUrl = `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.png?size=256`;
            document.getElementById("avatar").src = avatarUrl;

            // Update status indicator colour
            const statusEl = document.getElementById("statusIndicator");
            const statusColours = { online: "#43b581", idle: "#faa61a", dnd: "#f04747", offline: "#747f8d" };
            statusEl.style.background = statusColours[status] ?? statusColours.offline;

            // Custom status (if any)
            const customActivity = activities.find(a => a.type === 4);
            if (customActivity && customActivity.state) {
              document.getElementById("customStatus").textContent = customActivity.state;
            } else {
              document.getElementById("customStatus").textContent = "";
            }

            // Spotify handling
            if (spotify) {
              document.getElementById("spotifyCard").classList.remove("hidden");
              document.getElementById("spotifyAlbum").src = spotify.album_art_url;
              document.getElementById("spotifyTitle").textContent = spotify.song;
              document.getElementById("spotifyArtist").textContent = spotify.artist;
              // Theme the orbs based on album art
              await updateTheme(spotify.album_art_url);
            } else {
              document.getElementById("spotifyCard").classList.add("hidden");
              // fallback theme to avatar
              await updateTheme(avatarUrl);
            }
          }
          break;
        }
      }
    };

    ws.onerror = (err) => {
      console.error("Lanyard WebSocket error", err);
    };

    ws.onclose = () => {
      console.log("Lanyard WebSocket closed — reconnecting in 5s");
      clearInterval(heartbeatInterval);
      setTimeout(connectLanyard, 5000);
    };
  }

  connectLanyard();
</script>
